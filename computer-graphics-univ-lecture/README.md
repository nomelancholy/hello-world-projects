# 컴퓨터 그래픽스

## 컴퓨터 그래픽스의 개관

- 컴퓨터 그래픽스란

  - 컴퓨터를 이용하여 그림을 그리거나 조작하는 기술, 이러한 방식으로 제작된 그림

  - 그림을 그리거나 조작하기 위해 사용되는 컴퓨터 기술

    - 소프트웨어 기술

      - 그래픽스 기본요소 그리기 알고리즘
      - 그래픽스 객체의 이동, 회전, 크기조정 등의 기하변환
      - 2차원 및 3차원 뷰잉 알고리즘
      - 조명 및 물체의 렌더링 알고리즈

    - 하드웨어 기술

      - 입출력장치
      - 비디오 메모리
      - 그래픽스 처리기

### 컴퓨터 그래픽스의 역사

### 컴퓨터 그래픽스의 활용 분야

- CAD(Computer-aided design)

  - 컴퓨터를 이용하여 객체를 설계하는 기술
  - 자동차, 조선, 항공 산업, 건출 설계 등에 활용
  - CAM(Computer-aided manufacturing)과 함께 제조 공정에 연결될 수 있음
  - 디지털 프로토타이핑

- 디지털 아트

  - 컴퓨터를 통해 디지털 형태로 표현하는 예술

- 가시화

  - 영상, 도표, 애니메이션 등을 통해 메시지를 전달하는 기술

- 가상현실

  - 컴퓨터 시뮬레이션을 통해 현실에 가까운 감각을 제공하는 가상 환경

- 증강현실 및 혼합 현실

  - 증강현실 : 실제 세계의 정보에 디지털 정보를 결합하여 현실 환경 정보의 가치를 높이는 기술

  - 혼합현실 : 가상의 객체와 실제 객체가 공존하며 실시간으로 상호작용을 함으로써 가상의 세계와 실제 세계가 통합된 환경의 경험을 제공하는 기술

- 교육 및 훈련

  - 그래픽 디스플레이를 특수 하드웨어 시스템과 결합하여 모의 훈련을 위한 시뮬레이터 구성 (ex : 모의 비행 훈련 시스템)

- 영화, 애니메이션, 게임

### 컴퓨터 그래픽스 시스템 구성

- 컴퓨터 그래픽스 시스템

  - 입력장치

  - 그래픽 워크스테이션

    - CPU
    - 시스템 메모리
    - 입출력 장치

    - 비디오카드

      - GPU

        - 그래픽스 연산의 처리를 담당하는 그래픽스 전용 보조 프로세서
        - 주사변환, 2차원 및 3차원 그래픽스 렌더링, 디지털 비디오 데이터 처리 등의 작업을 담당함

      - 비디오 BIOS

        - 비디오 카드의 동작을 제어하고, 그래픽스 소프트웨어와 비디오 카드가 상호 동작하기 위한 인터페이스를 제공하는 펌웨어 형태의 기본 프로그램

      - 비디오 메모리

        - 그래픽 데이터 저장 : 프레임 버퍼, 깊이 버퍼 등
        - GPU 동작에 필요한 프로그램 및 데이터 저장

      - 비디오 출력 인터페이스

        - 프레임 버퍼에 저장된 화면을 디스플레이 장치에 출력
        - 비디오 출력 : VGA, DVI, HDMI, DisplayPort, Thunderbold 등

  - 출력장치

### 컴퓨터 그래픽스 디스플레이

- 디스플레이 장치

  - 초기의 디스플레이 장치

    - 음극선관 (CRT)

  - 평판 디스플레이 장치

    - PDP, LCD, OLED 등

- 디스플레이 방식

  - 벡터 디스플레이 방식

    - CRT 시절 사용

    - 임의 주사 디스플레이라고 부르기도 함

    - 명령(디스플레이 리스트)을 기반으로 선 그리기 형태로 그림을 디스플레이 : 도형을 구성하는 선분들을 하나씩 그리는 방식

  - 래스터 디스플레이 방식

    - 최근 사용 (CRT 시절에도 사용)

    - 일정한 각격의 격자 형식으로 배열된 점(픽셀) 으로 그림을 디스플레이하는 방식

    - 필셀 또는 화소 : 디스플레이 되는 각각의 점

    - 프레임 : 전체 스크린 영역에 해당되는 기름

    - 프레임 버퍼 또는 재생 버퍼(refresh buffer) : 한 프레임의 픽셀 값들을 저장하는 버퍼

    - 해상도 (resolution) : 디스플레이 장치에서 서로 겹치지 않고 그릴 수 있는 점들의 수

    - 래스터화(rasterization, 또는 주사 변환) : 디스플레이 하려는 그래픽스 객체를 이산적인 픽셀 값들의 집합으로 표현하는 것

    - 장점

      - 다양한 표면 패턴, 조명 효과 등을 나타낼 수 있도록 픽셀 값들을 계산하여 사실적인 영상을 디스플레이 할 수 있음

    - 단점

      - 그래픽스 객체들을 하나 하나의 점들의 집합으로 래스터화를 해야함

      - 에일리어싱 현상이 발생함

## 컴퓨터 그래픽스 소프트웨어

### 컴퓨터 그래픽스 영상의 표현

- 래스터 그래픽스 영상

  - 래스터 : CRT의 래스터 주사 방식에서 사용된 용어

  - 그림판이나 포토샵과 같은 편집기를 이용하여 만든 영상

  - TIFF, BMP, PNG, JPEG 등의 파일 형식으로 저장

  - 특성

    - 색 표현의 정밀도 : 각 픽셀당 색을 표현하는데 사용되는 비트 수에 의해 결정됨

    - 영상의 크기 : 영상의 가로 픽셀 수 \* 세로 픽셀 수로 표현

      - 영상을 저장하기 위한 메모리 양은 영상의 크기 및 색 표현의 정밀도에 의해 결정됨

      - 그림을 확대해도 더 세밀한 그림을 얻을 수는 없음

- 벡터 그래픽스 영상

  - 백터 : 크기와 방향을 동시에 나타내는 값

  - 백터 그래픽스 : 수학 방정식을 기반으로 점, 직선, 곡선, 다각형 등을 표현하는 방법

  - Adobe illustrator, CorelDRAW 등의 그래픽스 에디터로 제작

  - SVG, PDF, EPS, WMF, DXF 등의 파일 형식

  - 특성

    - 영상을 저장하는데 필요한 메모리 양은 영상의 크기가 아니라 영상에 들어 있는 그래픽스 기본요소의 수에 의해 결정됨

    - 렌더링을 통해 래스터 영상을 만들어 디스플레이 함

    - 영상을 확대해도 화질이 떨어지지 않으며 사연스럽게 형체를 유지하며 확대됨

    - 사진과 같은 영상을 표현하기에는 적절하지 않음

### 그래픽스 소프트웨어의 유형

- 컴퓨터 그래픽스 패키지

  - 응용 분야에 맞는 그림을 생성하기 위한 그래픽스 패키지

  - CAD, 페인트 패키지, 3ds Max, Maya, unity 등

- 범용 그래픽스 API

  - 전문 프로그래머가 C/C++, Java 등의 프로그래밍 언어에서 사용할 수 있는 그래픽스 라이브러리

  - 장면 설계 및 렌더링을 위한 최적화된 함수를 제공함

  - 그래픽스 API의 역할

    - 도형 정의

    - 속성 지정

    - 조명 설정

    - 뷰잉

    - 기하 변환

  - 범용 그래픽스 API의 유형

    - 저수준 그래픽스 API

      - 그래픽 기본요소 및 속성 지정, 기하 변환, 뷰잉 등 장면을 정의하여 컴퓨터 화면에 표시하는 일련의 과정을 지시하는 함수들을 제공

      - 프로그래머는 이 함수들을 이용하여 장면을 구성하고, 이를 화면에 그리기 위한 세부적인 처리 과정을 하나하나 프로그램으로 작성

      - GL, OpenGL, Direct3D 등

    - 고수준 그래픽스 API

      - 장면 묘사를 위주로 하는 기능을 제공

      - 다양한 모형(큐브, 다각형, 재질, 카메라, 광원 등)을 제공

      - 모형들로 구성된 객체들을 계층적으로 조직화하여 장면을 구성함

      - 예시

        - Open Inventor, VRML, Java 3D

### OpenGL 프로그래밍

- 개요

  - SGI의 그래픽 워크스테이션에 IRIS GL이라는 그래픽스 API를 제공

  - GL을 다양한 워크스테이션에서 활용할 수 있도록 하드웨어에 독립적인 버전인 Open GL을 개발

  - 저수준 절차적 API

- 진화 과정

  - 그래픽스 하드웨어 발전에 맞추어 새로운 버전으로 진화

  - OpenGL 1.0 (1992) : 고정 기능 그래픽스 파이프라인

  - OpenGL 2.0 (2004) : GLSL (OpenGL Shading Language)

  - OpenGL 3.0 (2008) : deprecation 모델 도입

  - OpenGL 4.0 (2010) : 두 단계의 새로운 테셀레이션 셰이더 추가

  - OpenGL 4.6 (2017)

  - 고정기능 파이프라인에서 프로그램 가능 파이프라인으로 진화

    - 고정 기능 파이프라인

      - 응용프로그램이 설정할 수 있는 고정된 개수의 파라미터에 의해 제어되는 동작을 하는 처리 단계로 구성되는 그래픽 파이프라인의 버전

    - 프로그램 가능 파이프라인

      - 꼭짓점, 프래그먼트의 처리 및 이들과 관련된 데이터가 셰이더 프로그램에 의해 제어되는 동작 모드

      - GLSL : 셰이더 프로그래밍을 위한 C-스타일의 문장으로 표현되는 언어

- OpenGL의 라이브러리

  - OpenGL core profile

    - 셰이더 프로그램의 준비

    - 셰이더가 사용할 데이터의 준비

    - 여러가지 OpenGL 상태 설정, 기하학적 구조의 그리기 지시 명령 등

  - OpenGL의 확장 기능

    - OpenGL은 하드웨어 발전에 맞추어 진화하는 API임

      - 하드웨어 공급업체에서 확장 기능 제공

      - 다수의 공급자의 동의하에 구현 - EXT

      - ARB의 승인 - ARB

      - 새로운 버전의 OpenGL에 수용

    - OpenGL의 확장 기능을 관리하는 라이브러리 활용

      - GLEW (OpenGL Extension Wrangler)

      - GLEE (OpenGl Easy Extension)

  - 윈도 입출력을 위한 라이브러리

    - OpenGL은 장치 독립적인 라이브러리 -> 특정 윈도 시스템을 위한 기능은 해당 윈도 시스템을 위한 라이브러리가 필요함

    - Microsoft Windows : WGL 인터페이스 루틴 사용

    - X Window : GLX 루틴 사용

    - 애플 시스템 : AGL 루틴 사용

  - 윈도 시스템 독립적 윈도 인터페이스 라이브러리

    - GLUT 라이브러리

      - 함수에 glut라는 접두사를 사용

      - 현재는 더이상 유지보수가 제공되지 않음

    - freeglut 라이브러리

      - GLUT를 대신할 수 있는 라이브러리

      - freeglut32.lib 라이브러리 파일 및 freeglut.h 헤더 파일을 사용

- OpenGL 자료형

- OpenGL의 함수 이름 형식

```OpenGL

return_type <lib _prefix>Function Name<arg_count><arg_type>{v}(<arguments>);

- <lib _prefix> : 함수 접두사
- <arg_count> : 함수가 갖는 인수의 수
- <arg_type> : 인수의 데이터형
- {v} : 인수가 벡터인 경우 첨가

```

- 셰이더

  - OpenGL 파이프라인

    Vertex Puller(꼭짓점 전달 - 고정 기능) -> Vertex Shader(꼭짓점 셰이더 - 필수) -> Tessellation Controll Shader (테셀레이션 제어 셰이더) -> Tessellation Primitive Gen.(테셀레이션 기본 요소 발생기 - 고정 기능) -> Tessellation Evaluation Shader (테셀레이션 계산 셰이더) -> Geometry Shader (기하구조 셰이더) -> Rasterization(래스터화 - 고정 기능) -> Fragment Shader (프래그먼트 세이더 - 필수)

  - GLSL (OpenGL Shading Language)

    - OpenGL ARB가 셰이더 프로그램 작성용 언어로 만든 C언어 형태의 프로그래밍 언어

    - OpenGL 그래픽스 파이프라인 중 프로그램 가능 단계를 수행하는 셰이더 프로그램을 작성함

## 컴퓨터 그래픽스의 기본 요소

### 점 그리기

- 좌표의 표현

  - 데카르트 좌표계

    - 원점에서 수직으로 교차하는 직선축으로 표현되는 좌표계

  - 동차 좌표

    - n차원 투영공간을 n + 1개의 좌표로 나타내는 좌표계
    - 2차원 동차좌표 : (xh, yh, h), h != 0

  - 2차원 데카르트 좌표와 동차좌표

    - 데카르트 좌표(x,y)에 대한 동차좌표 표현

    - 0이 아닌 모든 스칼라 값 h에 대해 (hx, hy, h)는 데카르트 좌표계 상에서 동일한 점 (x,y)를 나타냄

- OpenGL의 점 그리기

  - 꼭짓점 좌표의 전달

    - 꼭짓점 버퍼 객체를 생성하여 좌표를 저장한 후 꼭짓점 셰이더에 전달함

  - glDrawArrays 함수 사용

    - 인수

      - GLenum mode : GL_POINTS라는 상수 전달
      - GLint first : 그리기를 시작할 꼭짓점 번호
      - GLsizei count : 그릴 꼭짓점의 수

### 선분 그리기

- OpenGL의 선분 그리기

  - glDrawArrays 함수 사용

    - 인수

      - GLenum mode

        - GL_LINE : 나열된 꼭짓점들을 두 개씩 짝을 지어 선분을 그림
        - GL_LINE_STRIP : 나열된 꼭짓점들을 계속 연결하여 다중선을 그림
        - GL_LINE_LOOP : 나열된 꼭짓점들을 계속 연결하여 닫힌 다중선을 그림

- 직선 방정식

  - 기울기-절편 방정식

    - y = mx + b

    - y = mx + yl - mxl

    - m = 델타y / 델타x

    - m = yr - yl / xr - xl

    - 델타 y = m \* 델타x

    - 델타 x = 1/m \* 델타y

- DDA(Digital Differential Analyzer) 알고리즘

  - 기울기의 절대값(|m|)에 따라 기준 축을 정한 후, 기준 축의 좌표가 1만큼 변화할 때 나머지 축 좌표의 변화를 구하여 다음 점의 좌표를 계산함

    - |m| <= 1인 경우 : x축 좌표를 1씩 변화시킬 때 y축 좌표를 m만큼 변화시켜 다음 점의 좌표를 계산함

    - |m| > 1인 경우 : x축 좌표를 1씩 변화시킬 때 y축 좌표를 1/m만큼 변화시켜 다음 점의 좌표를 계산함

  - 계산된 좌표를 반올림하여 구한 정수 좌표 위치에 점을 그림

  - 특성

    - 기울기 값에 따라 한 축의 좌표는 1, 다른 축의 좌표는 m (또는 1/m) 만큼 변화시키며 다음 좌표를 계산하여 가장 가까운 정수 좌표에 해당되는 픽셀을 그림

  - 문제점

    - 부동소수점 계산을 해야 함 - 시간이 많이 소비됨

    - 긴 선분의 경우 부동소수점 연산의 오차가 누적되어 정확한 직선 경로를 벗어날 수 있음

- Bresenham의 직선 알고리즘

  - 기울기가 0과 1 사이인 직선을 가정함

- 원 그리기

- 다각형 그리기

## 그래픽스 기본 요소의 속성

## 기하변환

## 2차원 뷰잉

## 3차원 뷰잉

## 선과 면의 표현

## 가시면 결정

## 조명 및 표면 렌더링
